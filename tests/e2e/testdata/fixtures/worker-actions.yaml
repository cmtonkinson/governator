# Governator Test Worker Fixtures
# Maps prompt patterns (regex) to deterministic file actions

rules:
  # Execution triage: DAG ordering
  - pattern: '_local-state/dag.json'
    actions:
      - write:
          path: '_governator/_local-state/dag.json'
          content: |
            {
              "task-02": ["task-01"],
              "task-01": []
            }

  # Planning: Epic generation
  - pattern: 'planning.*epic|epic.*planning'
    actions:
      - write:
          path: '_governator/planning/epics.md'
          content: |
            # Epic 1: Test Epic

            ## Overview
            This is a test epic generated by the test worker.

            ## Tasks
            - Task 1: Implement feature A
            - Task 2: Implement feature B
            - Task 3: Write tests

  # Planning: Milestone generation
  - pattern: 'planning.*milestone|milestone.*planning'
    actions:
      - write:
          path: '_governator/planning/milestones.md'
          content: |
            # Milestone 1: Alpha Release

            ## Goals
            - Complete core functionality
            - Pass all tests

            ## Deliverables
            - Working prototype
            - Documentation

  # Role assignment
  - pattern: 'assign.*role|role.*assignment'
    actions:
      - write:
          path: '_governator/assignments/test-task.json'
          content: |
            {
              "role": "implementer",
              "confidence": "high",
              "reasoning": "Test assignment from test worker"
            }

  # Generic implementation task
  - pattern: 'implement|feature|bug.*fix'
    actions:
      - write:
          path: '_governator/tasks/implementation-output.md'
          content: |
            # Implementation Complete

            ## Changes Made
            - Added feature implementation
            - Updated tests

            ## Testing
            All tests passing.

  # Example: modify action (append)
  - pattern: 'add.*todo'
    actions:
      - modify:
          path: 'TODO.md'
          operation: 'append'
          content: |
            - [ ] New TODO item added by test worker

  # Example: modify action (prepend)
  - pattern: 'add.*header'
    actions:
      - modify:
          path: 'README.md'
          operation: 'prepend'
          content: |
            # Test Header
            This was prepended by the test worker.

  # Example: modify action (replace)
  - pattern: 'fix.*placeholder'
    actions:
      - modify:
          path: 'config.yaml'
          operation: 'replace'
          match: 'PLACEHOLDER'
          content: 'ACTUAL_VALUE'

  # Example: delete action
  - pattern: 'cleanup.*temp'
    actions:
      - delete:
          path: '_governator/temp.txt'
